import{r as s,a1 as j}from"./index-03957ff0.js";import{a as re,i as P,o as f,S as J,D as E,y as F,u as C,m as Re,q as Oe,v as ye,p as U,w as Se,k as z,c as Le,d as Ie,R as $e,X as k,I as H,C as De,e as Te,n as h,r as we,j as K,x as Pe}from"./transition-3cbf94cc.js";function ne(e,t){let[r,o]=s.useState(e),i=re(e);return P(()=>o(i.current),[i,o,...t]),r}function Z(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function Ce(e,t){let[r,o]=s.useState(()=>Z(e));return P(()=>{o(Z(e))},[e.type,e.as]),P(()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&o("button")},[r,t]),r}function Ee(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function Fe(e,t){let r=t.resolveItems();if(r.length<=0)return null;let o=t.resolveActiveIndex(),i=o??-1,a=(()=>{switch(e.focus){case 0:return r.findIndex(n=>!t.resolveDisabled(n));case 1:{let n=r.slice().reverse().findIndex((l,p,b)=>i!==-1&&b.length-p-1>=i?!1:!t.resolveDisabled(l));return n===-1?n:r.length-1-n}case 2:return r.findIndex((n,l)=>l<=i?!1:!t.resolveDisabled(n));case 3:{let n=r.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return n===-1?n:r.length-1-n}case 4:return r.findIndex(n=>t.resolveId(n)===e.id);case 5:return null;default:Ee(e)}})();return a===-1?o:a}function oe(e={},t=null,r=[]){for(let[o,i]of Object.entries(e))ae(r,ie(t,o),i);return r}function ie(e,t){return e?e+"["+t+"]":t}function ae(e,t,r){if(Array.isArray(r))for(let[o,i]of r.entries())ae(e,ie(t,o.toString()),i);else r instanceof Date?e.push([t,r.toISOString()]):typeof r=="boolean"?e.push([t,r?"1":"0"]):typeof r=="string"?e.push([t,r]):typeof r=="number"?e.push([t,`${r}`]):r==null?e.push([t,""]):oe(r,t,e)}function ke(e,t,r){let[o,i]=s.useState(r),a=e!==void 0,n=s.useRef(a),l=s.useRef(!1),p=s.useRef(!1);return a&&!n.current&&!l.current?(l.current=!0,n.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!a&&n.current&&!p.current&&(p.current=!0,n.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[a?e:o,f(b=>(a||i(b),t==null?void 0:t(b)))]}function _(e){return[e.screenX,e.screenY]}function Ae(){let e=s.useRef([-1,-1]);return{wasMoved(t){let r=_(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=_(t)}}}let ee=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function te(e){var t,r;let o=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return o;let a=!1;for(let l of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),a=!0;let n=a?(r=i.innerText)!=null?r:"":o;return ee.test(n)&&(n=n.replace(ee,"")),n}function Me(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let r=e.getAttribute("aria-labelledby");if(r){let o=r.split(" ").map(i=>{let a=document.getElementById(i);if(a){let n=a.getAttribute("aria-label");return typeof n=="string"?n.trim():te(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return te(e).trim()}function Ne(e){let t=s.useRef(""),r=s.useRef("");return f(()=>{let o=e.current;if(!o)return"";let i=o.innerText;if(t.current===i)return r.current;let a=Me(o).trim().toLowerCase();return t.current=i,r.current=a,a})}var Be=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Be||{}),Qe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Qe||{}),je=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(je||{}),Ue=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ue||{});function G(e,t=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=Pe(t(e.options.slice()),a=>a.dataRef.current.domRef.current),i=r?o.indexOf(r):null;return i===-1&&(i=null),{options:o,activeOptionIndex:i}}let ze={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,o=e.options.findIndex(i=>r(i.dataRef.current.value));return o!==-1&&(t=o),{...e,listboxState:0,activeOptionIndex:t}},2(e,t){var r;if(e.dataRef.current.disabled||e.listboxState===1)return e;let o=G(e),i=Fe(t,{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...o,searchQuery:"",activeOptionIndex:i,activationTrigger:(r=t.trigger)!=null?r:1}},3:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(n=>{var l;return!n.dataRef.current.disabled&&((l=n.dataRef.current.textValue)==null?void 0:l.startsWith(o))}),a=i?e.options.indexOf(i):-1;return a===-1||a===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:a,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,t)=>{let r={id:t.id,dataRef:t.dataRef},o=G(e,i=>[...i,r]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(o.activeOptionIndex=o.options.indexOf(r)),{...e,...o}},6:(e,t)=>{let r=G(e,o=>{let i=o.findIndex(a=>a.id===t.id);return i!==-1&&o.splice(i,1),o});return{...e,...r,activationTrigger:1}},7:(e,t)=>({...e,labelId:t.id})},W=s.createContext(null);W.displayName="ListboxActionsContext";function A(e){let t=s.useContext(W);if(t===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return t}let X=s.createContext(null);X.displayName="ListboxDataContext";function M(e){let t=s.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,M),r}return t}function He(e,t){return C(t.type,ze,e,t)}let qe=s.Fragment;function Ve(e,t){let{value:r,defaultValue:o,form:i,name:a,onChange:n,by:l=(c,d)=>c===d,disabled:p=!1,horizontal:b=!1,multiple:m=!1,...I}=e;const T=b?"horizontal":"vertical";let $=F(t),[R=m?[]:void 0,L]=ke(r,n,o),[g,u]=s.useReducer(He,{dataRef:s.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=s.useRef({static:!1,hold:!1}),w=s.useRef(null),N=s.useRef(null),q=s.useRef(null),O=f(typeof l=="string"?(c,d)=>{let y=l;return(c==null?void 0:c[y])===(d==null?void 0:d[y])}:l),D=s.useCallback(c=>C(x.mode,{1:()=>R.some(d=>O(d,c)),0:()=>O(R,c)}),[R]),x=s.useMemo(()=>({...g,value:R,disabled:p,mode:m?1:0,orientation:T,compare:O,isSelected:D,optionsPropsRef:v,labelRef:w,buttonRef:N,optionsRef:q}),[R,p,m,g]);P(()=>{g.dataRef.current=x},[x]),Re([x.buttonRef,x.optionsRef],(c,d)=>{var y;u({type:1}),Oe(d,ye.Loose)||(c.preventDefault(),(y=x.buttonRef.current)==null||y.focus())},x.listboxState===0);let le=s.useMemo(()=>({open:x.listboxState===0,disabled:p,value:R}),[x,p,R]),ue=f(c=>{let d=x.options.find(y=>y.id===c);d&&V(d.dataRef.current.value)}),se=f(()=>{if(x.activeOptionIndex!==null){let{dataRef:c,id:d}=x.options[x.activeOptionIndex];V(c.current.value),u({type:2,focus:S.Specific,id:d})}}),ce=f(()=>u({type:0})),de=f(()=>u({type:1})),pe=f((c,d,y)=>c===S.Specific?u({type:2,focus:S.Specific,id:d,trigger:y}):u({type:2,focus:c,trigger:y})),fe=f((c,d)=>(u({type:5,id:c,dataRef:d}),()=>u({type:6,id:c}))),be=f(c=>(u({type:7,id:c}),()=>u({type:7,id:null}))),V=f(c=>C(x.mode,{0(){return L==null?void 0:L(c)},1(){let d=x.value.slice(),y=d.findIndex(Q=>O(Q,c));return y===-1?d.push(c):d.splice(y,1),L==null?void 0:L(d)}})),ve=f(c=>u({type:3,value:c})),xe=f(()=>u({type:4})),ge=s.useMemo(()=>({onChange:V,registerOption:fe,registerLabel:be,goToOption:pe,closeListbox:de,openListbox:ce,selectActiveOption:se,selectOption:ue,search:ve,clearSearch:xe}),[]),he={ref:$},B=s.useRef(null),me=U();return s.useEffect(()=>{B.current&&o!==void 0&&me.addEventListener(B.current,"reset",()=>{L==null||L(o)})},[B,L]),j.createElement(W.Provider,{value:ge},j.createElement(X.Provider,{value:x},j.createElement(Se,{value:C(x.listboxState,{0:z.Open,1:z.Closed})},a!=null&&R!=null&&oe({[a]:R}).map(([c,d],y)=>j.createElement(Le,{features:Ie.Hidden,ref:y===0?Q=>{var Y;B.current=(Y=Q==null?void 0:Q.closest("form"))!=null?Y:null}:void 0,...$e({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,name:c,value:d})})),k({ourProps:he,theirProps:I,slot:le,defaultTag:qe,name:"Listbox"}))))}let Ge="button";function Ke(e,t){var r;let o=H(),{id:i=`headlessui-listbox-button-${o}`,...a}=e,n=M("Listbox.Button"),l=A("Listbox.Button"),p=F(n.buttonRef,t),b=U(),m=f(g=>{switch(g.key){case h.Space:case h.Enter:case h.ArrowDown:g.preventDefault(),l.openListbox(),b.nextFrame(()=>{n.value||l.goToOption(S.First)});break;case h.ArrowUp:g.preventDefault(),l.openListbox(),b.nextFrame(()=>{n.value||l.goToOption(S.Last)});break}}),I=f(g=>{switch(g.key){case h.Space:g.preventDefault();break}}),T=f(g=>{if(we(g.currentTarget))return g.preventDefault();n.listboxState===0?(l.closeListbox(),b.nextFrame(()=>{var u;return(u=n.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})})):(g.preventDefault(),l.openListbox())}),$=ne(()=>{if(n.labelId)return[n.labelId,i].join(" ")},[n.labelId,i]),R=s.useMemo(()=>({open:n.listboxState===0,disabled:n.disabled,value:n.value}),[n]),L={ref:p,id:i,type:Ce(e,n.buttonRef),"aria-haspopup":"listbox","aria-controls":(r=n.optionsRef.current)==null?void 0:r.id,"aria-expanded":n.listboxState===0,"aria-labelledby":$,disabled:n.disabled,onKeyDown:m,onKeyUp:I,onClick:T};return k({ourProps:L,theirProps:a,slot:R,defaultTag:Ge,name:"Listbox.Button"})}let We="label";function Xe(e,t){let r=H(),{id:o=`headlessui-listbox-label-${r}`,...i}=e,a=M("Listbox.Label"),n=A("Listbox.Label"),l=F(a.labelRef,t);P(()=>n.registerLabel(o),[o]);let p=f(()=>{var m;return(m=a.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})}),b=s.useMemo(()=>({open:a.listboxState===0,disabled:a.disabled}),[a]);return k({ourProps:{ref:l,id:o,onClick:p},theirProps:i,slot:b,defaultTag:We,name:"Listbox.Label"})}let Ye="ul",Je=J.RenderStrategy|J.Static;function Ze(e,t){var r;let o=H(),{id:i=`headlessui-listbox-options-${o}`,...a}=e,n=M("Listbox.Options"),l=A("Listbox.Options"),p=F(n.optionsRef,t),b=U(),m=U(),I=De(),T=(()=>I!==null?(I&z.Open)===z.Open:n.listboxState===0)();s.useEffect(()=>{var u;let v=n.optionsRef.current;v&&n.listboxState===0&&v!==((u=Te(v))==null?void 0:u.activeElement)&&v.focus({preventScroll:!0})},[n.listboxState,n.optionsRef]);let $=f(u=>{switch(m.dispose(),u.key){case h.Space:if(n.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case h.Enter:if(u.preventDefault(),u.stopPropagation(),n.activeOptionIndex!==null){let{dataRef:v}=n.options[n.activeOptionIndex];l.onChange(v.current.value)}n.mode===0&&(l.closeListbox(),K().nextFrame(()=>{var v;return(v=n.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case C(n.orientation,{vertical:h.ArrowDown,horizontal:h.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(S.Next);case C(n.orientation,{vertical:h.ArrowUp,horizontal:h.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(S.Previous);case h.Home:case h.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(S.First);case h.End:case h.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(S.Last);case h.Escape:return u.preventDefault(),u.stopPropagation(),l.closeListbox(),b.nextFrame(()=>{var v;return(v=n.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case h.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),m.setTimeout(()=>l.clearSearch(),350));break}}),R=ne(()=>{var u,v,w;return(w=(u=n.labelRef.current)==null?void 0:u.id)!=null?w:(v=n.buttonRef.current)==null?void 0:v.id},[n.labelRef.current,n.buttonRef.current]),L=s.useMemo(()=>({open:n.listboxState===0}),[n]),g={"aria-activedescendant":n.activeOptionIndex===null||(r=n.options[n.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":n.mode===1?!0:void 0,"aria-labelledby":R,"aria-orientation":n.orientation,id:i,onKeyDown:$,role:"listbox",tabIndex:0,ref:p};return k({ourProps:g,theirProps:a,slot:L,defaultTag:Ye,features:Je,visible:T,name:"Listbox.Options"})}let _e="li";function et(e,t){let r=H(),{id:o=`headlessui-listbox-option-${r}`,disabled:i=!1,value:a,...n}=e,l=M("Listbox.Option"),p=A("Listbox.Option"),b=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===o:!1,m=l.isSelected(a),I=s.useRef(null),T=Ne(I),$=re({disabled:i,value:a,domRef:I,get textValue(){return T()}}),R=F(t,I);P(()=>{if(l.listboxState!==0||!b||l.activationTrigger===0)return;let O=K();return O.requestAnimationFrame(()=>{var D,x;(x=(D=I.current)==null?void 0:D.scrollIntoView)==null||x.call(D,{block:"nearest"})}),O.dispose},[I,b,l.listboxState,l.activationTrigger,l.activeOptionIndex]),P(()=>p.registerOption(o,$),[$,o]);let L=f(O=>{if(i)return O.preventDefault();p.onChange(a),l.mode===0&&(p.closeListbox(),K().nextFrame(()=>{var D;return(D=l.buttonRef.current)==null?void 0:D.focus({preventScroll:!0})}))}),g=f(()=>{if(i)return p.goToOption(S.Nothing);p.goToOption(S.Specific,o)}),u=Ae(),v=f(O=>u.update(O)),w=f(O=>{u.wasMoved(O)&&(i||b||p.goToOption(S.Specific,o,0))}),N=f(O=>{u.wasMoved(O)&&(i||b&&p.goToOption(S.Nothing))}),q=s.useMemo(()=>({active:b,selected:m,disabled:i}),[b,m,i]);return k({ourProps:{id:o,ref:R,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":m,disabled:void 0,onClick:L,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:w,onMouseMove:w,onPointerLeave:N,onMouseLeave:N},theirProps:n,slot:q,defaultTag:_e,name:"Listbox.Option"})}let tt=E(Ve),rt=E(Ke),nt=E(Xe),ot=E(Ze),it=E(et),ct=Object.assign(tt,{Button:rt,Label:nt,Options:ot,Option:it});function at({title:e,titleId:t,...r},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const lt=s.forwardRef(at),dt=lt;export{dt as C,ct as N};
